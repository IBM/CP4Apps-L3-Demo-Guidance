{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":""},{"location":"#welcome-to-mkdocs","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"Deploy%20Java%20App%20to%20OCP/01%20Environment%20Setup%20Guide/","title":"Environment Setup Guide","text":""},{"location":"Deploy%20Java%20App%20to%20OCP/01%20Environment%20Setup%20Guide/#deploy-java-app-to-ocp-demo-environment","title":"Deploy Java App to OCP Demo Environment","text":""},{"location":"Deploy%20Java%20App%20to%20OCP/01%20Environment%20Setup%20Guide/#hands-on-setup-guide","title":"Hands-on setup guide","text":""},{"location":"Deploy%20Java%20App%20to%20OCP/01%20Environment%20Setup%20Guide/#1-introduction","title":"1    Introduction","text":"<p>This demo environment setup script walks through the prerequisite steps to setup demo environment for doing the Deploy Java App to OpenShift Container Platform (OCP) demo.</p>"},{"location":"Deploy%20Java%20App%20to%20OCP/01%20Environment%20Setup%20Guide/#2-reserve-demo-environment","title":"2    Reserve demo environment","text":"<p>The demo environment runs in IBM Cloud. You can reserve the environment by using the following steps:</p> <ol> <li> <p>Launch the IBM Technology Zone Create a reservation URL: https://techzone.ibm.com/my/reservations/create/65eb652a747d7a00108fb5db</p> </li> <li> <p>Use your IBM ID to login to the IBM Technology Zone, the Create a reservation page is displayed.</p> </li> <li> <p>Select Reserve now (A) button.</p> </li> </ol> <p></p> <ol> <li> <p>Follow the on-screen dialog to reserve an environment in an IBM Cloud data center in the closest Geography (US-Central, EMEA, Asia Pacific).</p> <ul> <li>The environment name should be pre-filled with Liberty Container Deployment with CP4Apps on OpenShift </li> <li>Purpose: Education </li> <li>Description: Enter a description. The field is required </li> <li>Preferred Geography: Choose an IBM Cloud datacenter in the closest geography (US, EMEA, Asia Pacific) </li> <li>End date and time: Use the calendar widget and select the maximum date available and select a time of day for reservation to expire and select a timezone nearest to you. </li> <li>VPN Access: Select Enable from the dropdown list.</li> </ul> </li> <li> <p>Once complete, check the agreement box (A) and click on the Submit (B) button.</p> </li> </ol> <p> </p> <ol> <li>The reservation takes a moment to be created. You can check its status by selecting My library (A) then clicking My reservations (B).</li> </ol> <p></p> <p>You see your reservation is in the Provisioning status.     </p> <p>It might take 15 minutes for the demo environment to be provisioned. When the environment is created, its status is changed to Ready.     </p>"},{"location":"Deploy%20Java%20App%20to%20OCP/01%20Environment%20Setup%20Guide/#3-access-the-demo-environment","title":"3    Access the demo environment.","text":"<ol> <li>When the demo environment is provisioned, click the reservation icon (A) to go to its details page.</li> </ol> <ol> <li>In the reservation details page, click the Workstation VM (A) URL link to open the URL in a new browser window.</li> </ol> <ol> <li>Click vnc.html (A) link.</li> </ol> <ol> <li>Click the Connect (A) button.</li> </ol> <ol> <li>Enter the password as: passw0rd (A). Then click the Send Credentials (B) button to access the lab environment.</li> </ol> <p>Note: That is a numeric zero in passw0rd.</p> <p>Once you log in to the Demo VM, you see the Desktop, which contains all the programs that you are going to use (browsers, terminal, and so on).     </p> <p>The login credentials for the demo VM are:</p> <ul> <li>User ID: techzone</li> <li>Password: passw0rd </li> </ul>"},{"location":"Deploy%20Java%20App%20to%20OCP/01%20Environment%20Setup%20Guide/#4-tips-for-working-in-the-demo-environment","title":"4    Tips for working in the Demo environment","text":"<ol> <li>You can resize the viewable area by using the noVNC Settings options to resize the virtual desktop to fit your screen.</li> </ol> <p>a.   From the demo VM, click the twisty (A) on the noVNC control pane to open the menu. </p> <p></p> <p>b.   To increase the visible area, click the Settings (A) icon and select Remote Resizing (B) from the Scaling Mode dropdown box.</p> <p></p> <ol> <li>You can copy / paste text from the Demo guide into the Demo environment by using the clipboard in the noVNC viewer. </li> </ol> <p>a.   Copy the text from the Demo guide that you want to paste into the Demo environment.</p> <p>b.   Click the Clipboard (A) icon and paste the text into the noVNC Clipboard (B).</p> <p> </p> <p>c.   Paste the text into the VM, such as to a terminal window, text editor or browser window.</p> <p>d.   Click on the clipboard icon again to close the clipboard</p>"},{"location":"Deploy%20Java%20App%20to%20OCP/01%20Environment%20Setup%20Guide/#5-configure-the-demo-environment","title":"5    Configure the demo environment","text":"<ol> <li>Clone GitHub demo artifacts</li> </ol> <p>To run the demo, you need to clone the GitHub demo artifacts to the Demo VM environment first.</p> <p>a.   Click the terminal (A) icon.</p> <p></p> <p>b. Clone the GitHub repo by running the following commands from the terminal window. </p> <pre><code>    cd /home/techzone\n    git clone https://github.com/IBMTechSales/appmod-pot-labfiles.git\n\nOnce it is done, the local demo artifacts repo will be at the /home/techzone/appmod-pot-labfiles directory on the Demo VM desktop.\n</code></pre> <p>c.   Copy the demo zip file to the /home/techzone/Downloads directory and unpack it by running the following commands:</p> <pre><code>    cp /home/techzone/appmod-pot-labfiles/demo/modresorts10war.ear_migrationBundle-demo_ready.zip /home/techzone/Downloads\n\n    unzip -d ~/Downloads /home/techzone/Downloads/modresorts10war.ear_migrationBundle-demo_ready.zip\n</code></pre> <ol> <li>Configure Transformation Advisor</li> </ol> <p>a. Launch Transformation Advisor from the terminal window with the command:</p> <pre><code>    transformation-advisor-local-3.8.1/launchTransformationAdvisor.sh\n</code></pre> <p>b. Type 5 and press Enter (A) to start the Transformation Advisor.</p> <p></p> <p>The Transformation Advisor is started after a few minutes.</p> <p></p> <p>c. Access the Transformation Advisor page form a web browser by double-clicking the browser (A) icon on the desktop.</p> <p></p> <p>d. Click the Transformation Advisor (A) bookmark in the browser to access it.</p> <p></p> <p>The Transformation Advisor page is displayed.</p> <p> </p> <p>e.   Create a workspace in Transformation Advisor by clicking Create new (A).</p> <p></p> <p>f.   Type Evaluation (A) as the workspace name and click Create (B).</p> <p> </p> <p>g. Upload collected WebSphere Server application data to Transformation Advisor by clicking Upload (A).</p> <p></p> <p>h.   Click Drop or add file (A).</p> <p></p> <p>i.   In the File Upload window, navigate to the /home/techzone/appmod-pot-labfiles/labs/TransformationAdvisor (A) folder, select AppSrv01-3.8.1.zip (B) and click Open (C).</p> <p></p> <p>After a few minutes, the collected WebSphere Server application data is uploaded into Transformation Advisor.</p> <p></p> <p>The Demo environment setup is now completed.</p>"},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/","title":"Demo Guide","text":""},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#deploy-java-app-to-ocp","title":"Deploy Java App to OCP","text":""},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#hands-on-demo-guide","title":"Hands-on demo guide","text":""},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#1-introduction","title":"1    Introduction","text":"<p>This demo provides fundamental hands-on experience with modernizing existing Java applications to WebSphere Liberty, deployed into a container platform, such as Red Hat OpenShift.</p> <p>The focus of this demo is on the practical aspects of how to use the deployment artifacts created by Transformation Advisor to speed up the process to deploy a Java app to Liberty running on OpenShift to achieve the objective for operation modernization.</p> <p>Open Liberty is an application server designed for the cloud. It\u2019s small, lightweight, and designed with modern cloud-native application development in mind. </p> <p>Open Liberty supports the full MicroProfile and Jakarta EE APIs and is composable, meaning that you can use only the features that you need, keeping the server lightweight, which is great for microservices. It also deploys to every major cloud platform, including Docker, Kubernetes, and Cloud Foundry.</p> <p>Operational Modernization gives an operations team the opportunity to embrace modern operations best practices without putting change requirements on the development team.</p> <p>The scaling, routing, clustering, high availability, and continuous availability functionality that were previously provided by the application server middleware, can be provided by the container platform.</p> <p>This allows the operations team to run cloud-native and modernized applications in the same environment with the same standardized logging, monitoring, and security frameworks.</p> <p>The operation modernization solution provided by IBM Cloud Pak for Application is to move existing Java applications to Liberty containers.</p> <p>IBM Cloud Transformation Advisor (TA) is an application modernization tool that is entitled through IBM Cloud Pak for Applications. Transformation Advisor helps you quickly evaluate on-premises Java EE applications for deployment to the cloud.</p> <p>The Transformation Advisor tool provides the following value:</p> <ul> <li>Identifies the Java EE programming models in the app</li> <li>Determines the complexity of replatforming these apps by listing a high-level inventory of the content and structure of each app</li> <li>Highlights Java EE programming model and WebSphere API differences between the WebSphere runtime profile types</li> <li>Identifies Java EE specification implementation differences that might affect the app</li> <li>Generates accelerators for deploying the application to Liberty and containers in a target environment</li> </ul> <p>Additionally, the tool provides a recommendation for the right-fit IBM WebSphere Application Server edition and offers advice, best practices, and potential solutions to assess the ease of moving apps to Liberty or newer versions of WebSphere traditional. It automatically generates a migration bundle with the artifacts you will need to containerize your application running on Liberty and deploy it to OpenShift Cloud Platform, accelerating application migrating to cloud process, minimizing errors and risks and reducing time to market.</p> <p>Operator is the Kubernetes operator and specifically the Liberty operator. Liberty operator is used in the demo to deploy the app running on Liberty to the OpenShift Container Platform (OCP). The value of operators, in general, is that it really simplifies the amount of configuration required to do a deployment via all the YAML files that are typically required in Kubernetes. Additional benefits specifically to the Liberty operator is that it offers the automation of common tasks, like deploying, scaling, getting dumps, including thread dumps, core dumps and heap dumps, and gathering app logs. Another key benefit of the operator is that it provides out-of-the-box security capability, including certificate management integration with OCP and single sign-on delegation.</p> <p>Kubernetes Kustomize is a tool that is native to Kubernetes that is available for customizing Kubernetes configuration. The idea is that the base configuration can be reused for deployments across different environments like development, staging, and production. The changes and modifications for different environments are provided as the adjustment snippets for the base configuration override. In this demo the deployment YAML file created by Transformation Advisor uses the Kustomize tool.</p> <p>Mod Resorts app is a WebSphere application showing the weather in various locations. This app is initially developed for WebSphere traditional.  In the demo it will be moved to Liberty in a container and deployed to OCP.    </p> <p>Demo Commands File lists all the commands used to setup and run the demo, so you can open it in a text editor and directly copy/paste the commands during the demo without going through the noVNC control pane. This file is provided to simplify the demo process. The file name is demo-setup-plus-commands.txt and it is in the /home/techzone/appmod-pot-labfiles/demo directory.       The commands used for this demo start from line 71 of the file.    </p> <p>In this demo, we are going to showcase how to rapidly deploy and configure the Mod Resorts app in Liberty running on an OpenShift Container Platform (OCP). We will show how easy it is to use IBM Transformation Advisors migration artifacts to accelerate the steps of the modernization journey, including build, configuration, and deployment. It will demonstrate that how quickly clients can realize the values from WebSphere Liberty and OCP, which provide greater deployment flexibility and operational efficiencies across the enterprise. We are also going to show how to config and use IBM License Service in OCP.</p> <p>The objectives of this demo are to:</p> <ul> <li>Learn how to use the Transformation Advisor migration bundle to build the application into a container image</li> <li>Learn the role of Kustomize when deploying the migration bundle</li> <li>Learn how to deploy the app to OpenShift with a single command</li> <li>Review the deployment configuration and learn how to configure and use the IBM License Service tracking in OCP</li> </ul>"},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#2-access-transformation-advisor","title":"2    Access Transformation Advisor","text":"<pre><code>Talking Points\n\nTo get started in the demo, I will go to IBM Transformation Advisor User Interface to look at the WebSphere applications Transformation Advisor analyzed \nAt the beginning of this demo, I have already gotten the Transformation Advisor Data Collector run on the WebSphere Application Server and gotten the analysis data loaded into the Transformation Advisor User Interface. \n\nNow let me go to Transformation Advisor User Interface to take a look at these applications. I will focus on the simple WebSphere applications Transformation Advisor identified. A simple application is the app that Transformation Advisor has assessed and indicated that no code changes are required for the app to run on Liberty. \n</code></pre> <ol> <li> <p>If the Transformation Advisor is not started yet, start it by running the command below in a terminal window. Otherwise skip this step.</p> <pre><code>cd /home/techzone/transformation-advisor-local-3.8.1\n\n./launchTransformationAdvisor.sh\n</code></pre> </li> <li> <p>Type 5 and press Enter (A) to start the Transformation Advisor.  </p> <p>The Transformation Advisor is started after a few minutes.  </p> <p>Note: you might see an error message when launching the Transformation Advisor, just ignore it, because it will not impact the start of Transformation Advisor.</p> </li> <li> <p>Access Transformation Advisor page from a web browser by clicking the Transformation Advisor (A) bookmark in the browser.  </p> <p>The Transformation Advisor page is displayed.  </p> </li> <li> <p>Click the Evaluation workspace (A) to open it.  </p> <p>The Evaluation workspace is displayed.  </p> <p>Notice that only WebSphere Liberty is selected as Migration target which is the platform we want to move the Mod Resorts app to.</p> </li> </ol>"},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#3-download-transformation-advisor-migration-plan","title":"3    Download Transformation Advisor migration plan","text":"<pre><code>Talking Points\nNow I am in Transformation Advisor and as one can see there are five applications assessed. \nWe have other demonstrations that showcase how to do an application assessment and how to interpret the results, but in this demo, I am going to focus primarily on the migration plan and what it is going to take to move an application from the WebSphere traditional to WebSphere Liberty running on a container platform.\n\nI want to focus on moving a simple application from WebSphere traditional to Liberty without any code change. As you can see, five applications have been assessed and four of these have been classified as simple, meaning no code change is required to move them to Liberty. I will choose the Mod Resort application that I have staged and set up for the demo.\nFirst, I will take a look at the Transformation Advisor migration plan which contains the artifacts that have been generated by Transformation Advisor as a result of scanning the application and the configuration in WebSphere Application Server (WAS). By doing so, I can understand the Liberty server configuration, the build file to build the container image as well as the YAML artifacts to deploy into a Kubernetes and OCP which are created by Transformation advisor. \nIn this task, I need to simply download the migration plan to my local workstation.\n</code></pre> <ol> <li> <p>Scroll down to locate the Mod Resort application (A) in Transformation Advisor and click Migration plan (B).  </p> </li> <li> <p>The Migration plan page is displayed, click Download (A).  </p> <p>The Migration plan package named modresorts10war.ear_migrationBundle.zip is now downloaded to the Downloads directory of the demo VM. It contains the Liberty server configuration (server.xml), the build file (Containerfile) to build the container image as well as the YAML artifacts to deploy into a Kubernetes or OCP environment. </p> <p>Note: The Transformation Advisor Migration plan package is also called the Transformation Advisor migration bundle.</p> </li> </ol>"},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#4-review-the-updated-transformation-advisor-migration-bundle","title":"4    Review the updated Transformation Advisor migration bundle","text":"<pre><code>Talking Points\nThe Mod Resorts app Migration bundle gets downloaded into the Downloads directory of the local file system from Transformation Advisor. In order to deploy the application to Liberty on OpenShift, I need to make a few changes to the bundle, including changing server configuration settings, adding app war file and update image file name and other settings in the deployment YAML file. To keep the demo simple, I will use a prepared migration bundle where I already applied the required changes. The prepared migration bundle package is in the modresorts10war.ear_migrationBundle-demo_ready directory.\n\nI will take a quick look at what are in the migration bundle:\n1. The bundle includes a file named Containerfile to build the container image with the app deployed on Liberty. \n2. I placed the war file of the Mod Resorts app into the target directory. Since no code changes are required, I do not need to rebuild the application and just copied the war file that WAS used. \n3. The source directory in the bundle includes the liberty server configuration file, server.xml, which is created by Transformation Advisor. It includes the server configuration for Mod Resorts to run in Liberty and a few minor modifications I made.\n4. The last piece I want to look at is the deployment artifacts in the deploy directory of the migration bundle. These are the YAML files that Transformation Advisor created to deploy the app to a Kubernetes environment using the standard Kubernetes resources or the Liberty operator. In this demo, I am using the Liberty Operator and the Kustomize tool to deploy the app to OCP. \n\nBasically, I have the customization files for deploying the Mod Resorts app to Liberty container running on OCP and I will use these customized migration bundle files that Transformation Advisor generated.\n</code></pre> <ol> <li> <p>From the File manager window, click the modresorts10war.ear_migrationBundle-demo_ready (A) folder under the /home/techzone/Downloads directory to access it. </p> </li> <li> <p>Review the contents in the directory. The migration bundle has all artifacts that we need to deploy the app to Liberty in container and to a Kubernetes environment. The Containerfile is the one to be used to create the Docker image. </p> </li> <li> <p>Click target (A) folder to access it. </p> <p>This directory contains the original app war file because there are no code changes needed to move it from WebSphere traditional to Liberty. </p> </li> <li> <p>Click the src (A) folder and go to the main&gt;liberty&gt;config directory. </p> <p>We see the Liberty configuration file, server.xml, which includes the server configuration for Mod Resorts to run in Liberty and a few minor modifications. </p> </li> <li> <p>Click the deploy (A) folder to open it </p> <p>We see two folders, k8s and kustomize, which contain the YAML files that Transformation Advisor created to deploy the app to a Kubernetes environment. While the k8s folder is used for deployments using the standard Kubernetes resources, kustomize is used for deployments using the Liberty operator. </p> </li> <li> <p>Click the kustomize (A) folder and go to the base directory. </p> <p>The base folder contains the YAML files used to deploy the app to a Liberty container running on OCP using Liberty operator. </p> </li> </ol>"},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#5-create-docker-container-image","title":"5    Create Docker container image","text":"<pre><code>Talking Points\n\nTo deploy the Mod Resorts app in Liberty on container, I need to build a container image for the app first. In this task, I am going to leverage the updated migration bundle artifices, and create a Docker container for the Mod Resorts app. I will show how easy it is to deploy the app in a local Docker container using the migration bundle artifices from Transformation Advisor.\n\nThe first thing I am going to do is to go to the migration bundle directory structure and run the command to build the Docker image. The command will take the Containerfile that Transformation Advisor created and it is going to build the container image for the Mod Resorts app running on Liberty. \n\nAfter the image is created, I will verify it by starting a Docker container with docker run command. I will verify that the container is running and show I can access the Mod Resorts app running on Liberty in a local Docker container.\n\nOnce the image is created and verified, it is ready to be deployed to OCP in the next task.\n</code></pre> <ol> <li> <p>From a terminal window, go to migration bundle directory with command:</p> <pre><code>cd /home/techzone/Downloads/modresorts10war.ear_migrationBundle-demo_ready\n</code></pre> </li> <li> <p>Build Docker image with command:</p> <pre><code>docker build -f ./Containerfile --tag default-route-openshift-image-registry.apps.ocp.ibm.edu/resorts/modresorts:23009 .\n</code></pre> <p>The Docker image is built.  </p> <p>Note: The first time to build the Docker image, it will take a longer time because it needs to download all the artifacts to the local demo VM. After that, each build will only pull down the updated artifacts, so the process will be much fast. Therefore, it is recommended to run the command to build the image first before doing the client facing demo to save time.</p> </li> <li> <p>To verify the Docker image, run the command below:</p> <pre><code>docker images | grep resorts\n</code></pre> <p>We can see that the Docker image is created.  </p> </li> <li> <p>Now we start the app container with the Docker image with the following command:</p> <pre><code>docker run -d --rm -p 9080:9080 --name resorts default-route-openshift-image-registry.apps.ocp.ibm.edu/resorts/modresorts:23009\n</code></pre> </li> <li> <p>To verify the container is running, issue the following command:</p> <pre><code>docker ps | grep resorts\n</code></pre> <p>We can see that the container is running.  </p> </li> <li> <p>To test the application, access its URL at http://localhost:9080/resorts (A) from a browser window.  </p> <p>The Mod Resorts application page is displayed.  </p> </li> <li> <p>Click WHERE TO? (A) and select San Francisco, USA (B).  </p> <p>The weather information is San Francisco is showing.  </p> <p>Now we have tested and verified that the app is running on Liberty container. What we will do next is to deploy the app in Liberty container to OCP.</p> </li> </ol>"},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#6-deploy-to-openshift-environment","title":"6    Deploy to OpenShift environment","text":"<pre><code>Talking Points\n\nIn the last section, I have built the Mod Resorts app on Liberty container image and tested it.\nAlso in the previous section, we explored the Kubernetes kustomize structure coming from the Transformation Advisor migration bundle.\n\nIn this section I will use the kustomize tool to deploy the Mod Resorts app to OCP. \n\nBefore I do the deployment, I will stop the local Docker container first.\n\nIn order to deploy the Mod Resorts app to OCP, I will push the image to an image registry which can be any image registry the clients are using. In this demo, I am going to use the internal registry that is available in the OCP environment. \n\nTo push the image into OCP, I will need to log into the OCP environment, create a new project called resorts for the app and log into the internal OCP image registry. Then I will run a single command to push the app image from my local VM to the OCP image registry. \n\nAfter pushed the image into the OCP image registry, I will verify it either from command line or from the OCP web console.\n\nOnce I have uploaded the app image into OCP, I am ready to deploy the app to OCP. With Transformation Advisor, this deployment process is made really simple by using the artifacts that Transformation Advisors created and using the kustomize tool in Kubernetes. One can configure and deploy all in a single command and a single step.\n\nAfter the app is deployed to OCP, we can access it through its route URL which is generated by the Liberty operator.\n</code></pre> <ol> <li> <p>From a terminal window, run the following command to stop the local Liberty container.</p> <pre><code>docker stop resorts\n</code></pre> <p>The local Liberty container is now stopped.</p> </li> <li> <p>Log in to the OCP cluster with command:</p> <pre><code>oc login -u ocadmin -p ibmrhocp\n</code></pre> <p></p> </li> <li> <p>Create a new project called resorts for the Mod Resorts app with command:</p> <pre><code>oc new-project resorts\n</code></pre> <p></p> </li> <li> <p>Log in to the OCP image registry with command:</p> <pre><code>docker login -u $(oc whoami) -p $(oc whoami -t) default-route-openshift-image-registry.apps.ocp.ibm.edu\n</code></pre> <p></p> </li> <li> <p>Now push the app image to the OCP image registry with command:</p> <pre><code>docker push default-route-openshift-image-registry.apps.ocp.ibm.edu/resorts/modresorts:23009\n</code></pre> <p></p> <p>Note: It might take a few minutes to upload the image to the registry.</p> </li> <li> <p>After the image is uploaded to the OCP image registry, we can verify it with command:</p> <pre><code>oc get is\n</code></pre> <p> </p> </li> <li> <p>We can also verify it from the OCP web console.</p> <p>a.  Access the OCP web console by clicking the OpenShift Console (A) bookmark in the web browser.  </p> <p>b.  Accept the default Username/Password and click Log in (A). </p> <p>After logged in, the OCP web console Home page is displayed.  </p> <p>c.  Click Builds (A), select ImageStreams (B) and select resorts project (C), we can see that the app image is listed.  </p> <p>d.  Click the app image link (A) to view its details.  </p> <p>The app image detail page is displayed.  </p> <p>Now we have verified that the app image is uploaded, we are ready to deploy the app to OCP using the YAML artifacts generated by Transformation Advisor.</p> </li> <li> <p>From the OCP web console, click Workloads (A) and click Pods (B), we can see that currently we do not have any app pods running. </p> </li> <li> <p>From the OCP web console, click Workloads (A) and click Deployment (B), we can see that currently we do not have any app deployment yet. </p> </li> <li> <p>To deploy the Mod Resorts app to OCP, go to the terminal window and run the following commands:</p> <pre><code>cd /home/techzone/Downloads/modresorts10war.ear_migrationBundle-demo_ready\n\ncd deploy/kustomize\n\noc apply -n resorts -k overlays/resorts_1.0\n</code></pre> <p></p> <p>This is a quick command run. Please note that the oc apply command is using the kustomize tool with a -k option and it is pointing to the overlays directory and a sub directory named resource_1.0, so it uses the YAML files in that overlay directory in addition to the base configuration that is in the base directory of the migration bundle.</p> </li> <li> <p>To check the status of the deployment, we can run command:</p> <pre><code>oc get pods\n</code></pre> <p>We can see that 8 pods are created and they are starting to run. We might need to run the same command a few times until all 8 pods are up running.  </p> </li> <li> <p>Once these pods are up and running, we need to get the application route so we can access it. To get the route, run command:</p> <pre><code>oc get route -n resorts\n</code></pre> <p>We can see that the app route is: http://modresorts10war-resorts.apps.ocp.ibm.edu </p> </li> <li> <p>With the app route information, we can access the Mod Resorts app in OCP from a web browser by entering the URL as: http://modresorts10war-resorts.apps.ocp.ibm.edu/resorts (A). </p> <p>We can see that the Mod Resorts app has been successfully deployed to the OCP environment and is running on the OCP now.</p> </li> </ol>"},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#7-review-the-deployment-configuration-and-use-the-license-service","title":"7    Review the deployment configuration and use the License service","text":"<pre><code>Talking Points\n\nI have deployed the Mod Resorts app to the OCP environment with 8 pods running in the previous section.  Now I will take a look at the deployment YAML file to review the deployment configuration.\n\nTo deploy the Mod Resorts app to the OCP, I used the app YAML file in the base/kustomize folder of the migration bundle, which actually points to the app image that I pushed to the OCP image registry.\nIn this particular deployment YAML file, I have specified to spin up 8 replicas of the Mod Resorts app and that is the reason we see the 8 pods running in the OCP environment.\n\nI added the license tracking information in the YAML file, so we see how the license service is working with the Liberty operator in OCP. \n\nIn order to deploy the app and use the license service in OCP, I need to specify that I accept the license, where to get the entitlement from and what the Liberty edition I am using. I set the entitlement and the Liberty edition as: the Cloud Pak for Applications and Liberty Core. \n\nAdditionally, I put a resource limit on the amount of CPU each pod can use and specified it as 1 virtual core. In general, the CPU limit should be set to a value for what the app needs, the value impacts not only the licensing but also the app deployment and overall CPU usage. I did this setting to demo the license tracking capability in OCP. Because in Cloud Pak for Applications Standard edition Liberty Core deployment is based on virtual processor cores in 8 to 1 ratio, meaning that based on the deployment configuration I set, even I have 8 Liberty Core pods running in OCP, I only consumed 1 virtual processor core of Cloud Pak for Applications. \n\nFinally, I will show how to access the License tracing service report in OCP.\n</code></pre> <ol> <li> <p>To review the deployment configurations, double-click the File Manager (A) icon on the Desktop.  </p> </li> <li> <p>Navigate to the /home/techzone/Downloads/modresorts10war.ear_migrationBundle-demo_ready/deploy/kustomize/base directory.</p> <p>The contents in the directory are displayed.  </p> </li> <li> <p>Click the application-cr.yaml (A) file to open it for reviewing. This is the application customer resource YAML file. </p> <p>The content of the YAML file is displayed.  </p> <p>As we can see from this configuration file, the deployment replica is set as 8. The app image is pointing to the image that we pushed to the OCP image registry. The license tracking information is added as Cloud Pak for Application and Liberty Core and the CPU resource limit is set at 1000m.</p> </li> <li> <p>Now we can take a look at the license tracing service report about our license usage. To do it, go to the web browser and click the IBM License Service Status-with token (A) bookmark.  </p> <p>Note: we can also enter the IBM License Service Status-with token URL as:  https://ibm-licensing-service-instance-ibm-common-services.apps.ocp.ibm.edu/status?token=dnwsnLNwvQ9ie4o9U5mpRhoG</p> <p>The License Service Report is displayed.  </p> <p>The report shows that Liberty Core is running in 8 pods with one CPU per pod, so in total we consume 8 CPUs and the total Cloud Pak for Application license consumed is 1.</p> </li> <li> <p>Let\u2019s see that happened to the report if we remove the Mod Resorts app deployment from the OCP. To do it, run the following command from the terminal window to delete the deployment:</p> <pre><code>oc delete -n resorts -k overlays/resorts_1.0\n</code></pre> <p></p> </li> <li> <p>Now the Mod Resorts app deployment is deleted, let\u2019s see what happened in the License Service Report. Go back to the browser window and refresh (A) the License Service Report page.  </p> <p>As we can see there is nothing listed in the report anymore.  </p> </li> </ol>"},{"location":"Deploy%20Java%20App%20to%20OCP/02%20Demo%20Guide/#8-summary","title":"8    Summary","text":"<p>In this demo, we learned how to move a WebSphere app from WebSphere traditional to WebSphere Liberty container and deploy it to OCP using the deployment artifacts produced by Transformation Advisor in its migration bundle.</p> <p>You explored the options for deployment:</p> <ul> <li>Liberty as an image running in a local container.</li> <li>Liberty as an image running in OpenShift.</li> </ul> <p>You learned how to easily configure and deploy an app to OpenShift using Transformation Advisor migration bundle deployment artifacts which leverage the Kubernetes kustomize tool.</p> <p>You learned how to enable the License service to the track the Liberty license usage in the deployment YAML and use Liberty operator and IBM License Service in OCP to access the License tracking report.</p>"}]}